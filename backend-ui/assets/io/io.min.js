function _convertToAlias(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}function _EDITABLE_SELECT(e,t="active",n=[]){void 0===n[0]&&(n=[{value:"active",text:"Đang hoạt động"},{value:"dratf",text:"Bản nháp"}]),$(e).editable({value:t,source:n,params:function(e){return e._token=jQuery("meta[name=_token]").attr("content"),e},display:function(e,t){var n=[],a=$.fn.editableutils.itemsByValue(e,t);a.length?($.each(a,function(e,t){n.push($.fn.editableutils.escape(t.text))}),$(this).html(n.join(", "))):$(this).empty()},success:function(e){0==e.status&&(alert(e.msg),window.location.href="")}})}function _EDITABLE_TEXT(e,t="Chưa cập nhật",n=[]){$(e).editable({title:"",params:function(e){return e._token=jQuery("meta[name=_token]").attr("content"),e},display:function(e,t){var n;if(n="string"==typeof(e=$(this).data("title"))?e:_FORMAT_MONEY(e),void 0!==t&&1==t.status){n=_FORMAT_MONEY(t.data.cong_no);let e=_FORMAT_MONEY(t.data.so_diem_duoc_nhan);$(this).parents(".so_diem_no").next(".so_diem_duoc_nhan").find("b.so_diem_duoc_nhan").text(e)}else void 0!==t&&0==t.status&&(window.location.href="");$(this).text(n)},validate:function(e){if(!e)return"Công nợ không được bỏ trống"},success:function(e){0==e.status&&(alert(e.msg),window.location.href="")}})}function _FORMAT_MONEY(e){return(e/1).toFixed(0).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")+" ₫"}function _INIT_DATERANGEPICKER_SINGLE(){$(".daterange-single, .date-datepicker").daterangepicker({singleDatePicker:!0,opens:"right",locale:{format:"DD/MM/YYYY"}})}function _INIT_DATETIMERANGEPICKER_NOTAUTO(){$(".datetime-datepicker-notauto").daterangepicker({opens:"right",timePicker:!0,singleDatePicker:!0,timePicker24Hour:!0,timePickerIncrement:1,locale:{format:"DD/MM/YYYY hh:mm"}})}function _INIT_DATERANGEPICKER_INC(){$(".daterange-increments").daterangepicker({timePicker:!0,opens:"right",applyClass:"btn-primary",cancelClass:"btn-light",timePickerIncrement:10,locale:{format:"MM/DD/YYYY h:mm: a"}})}function _INIT_DATERANGEPICKER(){$(".daterange-basic").daterangepicker({applyClass:"btn-primary",cancelClass:"btn-light",opens:"left",timePicker:!0,opens:"left",autoUpdateInput:!1,locale:{format:"DD/MM/YYYY"}}),$(".daterange-basic").on("apply.daterangepicker",function(e,t){$(this).val(t.startDate.format("DD/MM/YYYY")+" - "+t.endDate.format("DD/MM/YYYY"))}),$(".daterange-basic").on("cancel.daterangepicker",function(e,t){$(this).val("")})}function calcTime(e,t=/(\d{2})\/(\d{2})\/(\d{4})/){var n=new Date(e.replace(t,"$3-$2-$1"));return date_now=new Date,seconds=Math.floor((n-date_now)/1e3),minutes=Math.floor(seconds/60),hours=Math.floor(minutes/60),days=Math.floor(hours/24),hours-=24*days,minutes-=24*days*60-60*hours,seconds-=24*days*60*60-60*hours*60-60*minutes,{d:days,h:hours,m:minutes,s:seconds}}function _INIT_EDITABLE_PICKER(){var e=$(".pickadate-editable").pickadate({editable:!0,format:"dd/mm/yyyy",onClose:function(){$(".datepicker").focus()}}),t=e.pickadate("picker");e.on("click",function(e){t.get("open")?t.close():t.open(),e.stopPropagation()})}function _AUTOCOMPLETE_INIT(e,t){$(e).autocomplete({minLength:3,source:t,focus:function(t,n){return $(e).val(n.item.label),!1},select:function(t,n){return $(e).val(n.item.label),!1}}).autocomplete("instance")._renderItem=function(e,t){return $("<li>").append("<a>"+t.label+"</a>").appendTo(e)}}function _GET_SCRIPT(e){var t=document.createElement("script");t.src=e;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}function _SHOW_FORM_REMOTE(e,t,n){void 0!==t&&""!=t||(t="myModal"),null!=n?t+=e.replace(/[^\w\s]/gi,""):jQuery(".modal-backdrop").remove(),jQuery("#"+t).remove(),jQuery("body").append('<div class="modal fade" id="'+t+'" tabindex="-1" role="dialog" aria-labelledby="'+t+'Label" aria-hidden="true"><div class="mmbd"></div></div>');var a=jQuery("#"+t),i=jQuery("#"+t+" .mmbd");return a.on("show.bs.modal",function(){i.load(e)}).modal({backdrop:"static"}),!1}!function(e){e.fn.serializeJSON=function(){var t,n;return t={},n=this.serializeArray(),e.each(n,function(n,a){var i,o,r;i=a.name,o=a.value,""===(r=e.map(i.split("["),function(e){return"]"===e[e.length-1]?e.substring(0,e.length-1):e}))[0]&&r.shift(),e.deepSet(t,r,o)}),t};e.deepSet=function(t,n,a){var i,o,r,l,c;if(!n||0===n.length)throw new Error("ArgumentError: keys param expected to be an array with least one key");i=n[0],1==n.length?""===i?t.push(a):t[i]=a:(o=n[1],""===i&&(l=t.length-1,!function(e){return e===Object(e)}(c=t[t.length-1])||c[o]?(t.push({}),i=l+1):i=l),void 0===t[i]&&(""===o||function(e){return/^[0-9]+$/.test(String(e))}(o)?t[i]=[]:t[i]={}),r=n.slice(1),e.deepSet(t[i],r,a))}}(jQuery);var STATUS_JSON_DONE=1,STATUS_JSON_RELOGIN=-2,ALL_POST_RESULT=[],ADMIN_PREFIX="/";function getUrlParameters(e,t){return new URL(e).searchParams.get(t)}function __callback(e){var t="error",n=e.msg,a="danger",i={open:function(e){var t=this,n=new mojs.Timeline,a=new mojs.Html({el:t.barDom,x:{500:0,delay:0,duration:500,easing:"elastic.out"},isForce3d:!0,onComplete:function(){e(function(e){e()})}}),i=new mojs.Shape({parent:t.barDom,width:200,height:t.barDom.getBoundingClientRect().height,radius:0,x:{150:-150},duration:600,isShowStart:!0});t.barDom.style.overflow="visible",i.el.style.overflow="hidden",i.el.style["z-index"]="-1";var o=new mojs.Burst({parent:i.el,count:10,top:t.barDom.getBoundingClientRect().height+75,degree:90,radius:75,angle:{[-90]:40},children:{fill:"#EBD761",delay:"stagger(500, -50)",radius:"rand(8, 25)",direction:-1,isSwirl:!0}}),r=new mojs.Burst({parent:i.el,count:2,degree:0,angle:75,radius:{0:100},top:"90%",children:{fill:"#EBD761",pathScale:[.65,1],radius:"rand(12, 15)",direction:[-1,1],delay:400,isSwirl:!0}});n.add(a,o,r,i),n.play()},close:function(e){new mojs.Html({el:this.barDom,x:{0:500,delay:10,duration:500,easing:"cubic.out"},skewY:{0:10,delay:10,duration:500,easing:"cubic.out"},isForce3d:!0,onComplete:function(){e(function(e){e()})}}).play()}};switch(Noty.overrideDefaults({theme:"limitless",layout:"topRight",type:t,timeout:12e3}),e.status){case"notif-error":t="error",i={};break;case"notif-info":t="info/information",a="info";break;case"notif-success":t="confirm",a="success";break;case 1:if(alert(e.msg),void 0!==e.data.reload&&!0===e.data.reload)if(getUrlParameters(window.location.href,"slink")){let e=removeParam("slink",window.location.href);window.location.href=e}else location.reload();else void 0!==e.data.redirect&&e.data.redirect&&(window.location.href=e.data.redirect);break;default:a="danger",i={}}"notif-success"==t&&void 0!==e.data?location.reload():new Noty({theme:" alert alert-"+a+" alert-styled-left p-0 mb-2",progressBar:!1,closeWith:["button"],layout:"topRight",text:n,type:t,animation:i}).show()}function _POST(url,data,callback,cache,type){if(null!=cache&&null!=ALL_POST_RESULT[cache])return callback(ALL_POST_RESULT[cache]);var _token=jQuery("meta[name=_token]").attr("content");if(_token){var _data={name:"_token",value:_token};data.push(_data)}return null==type&&(type="json"),jQuery.ajax({url:url,type:"POST",data:data,dataType:type,success:function(data){return console.log("data",data),null!=cache&&null!=cache&&(ALL_POST_RESULT[cache]=data),eval(callback(data))},error:function(e,t,n){alert(n)}}),!0}function _POST_FORM(formId,url,options={}){let{callback:callback,type:type="json",globalCallback:globalCallback=!0}=options,data=[];void 0!==formId&&(data=$(formId).serializeArray());let _token=jQuery("meta[name=_token]").attr("content");if(_token){let e={name:"_token",value:_token};data.push(e)}return jQuery.ajax({url:url,type:"POST",data:data,dataType:type,success:function(res){try{eval(options.callback(res))}catch(e){}if(globalCallback)return eval(__callback(res))},error:function(e,t,n){alert(n)}}),!1}function _GET_FORM(formId,url,options={}){let{callback:callback,type:type="json",globalCallback:globalCallback=!0}=options,data=[];void 0!==formId&&(data=$(formId).serializeArray());let _token=jQuery("meta[name=_token]").attr("content");if(_token){let e={name:"_token",value:_token};data.push(e)}return jQuery.ajax({url:url,type:"GET",data:data,dataType:type,success:function(res){try{eval(options.callback(res))}catch(e){}if(globalCallback)return eval(__callback(res))},error:function(e,t,n){if(422===e.status){var a=e.responseJSON,i="";$.each(a.errors,function(e,t){i=t}),alert(i)}else alert(e)}}),!1}function _POST_JSON_BODY(url,data,callback){return jQuery.ajax({url:url,type:"POST",data:JSON.stringify(data),dataType:"json",contentType:"application/json",success:function(data){return console.log("data",data),eval(callback(data))},error:function(e,t,n){alert(n)}}),!0}var App={DOMAIN:document.location.origin,API:document.location.origin+"/api"};function show_notify(e,t,n,a){new PNotify({title:e,text:a,icon:n,type:t})}function isUrlValid(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}function checkAll(e){jQuery("#checkAll").change(function(){jQuery("#"+e+" input:checkbox").prop("checked",$(this).prop("checked")),$(".styled.js-bl-ck").uniform({radioClass:"choice"})})}function getCheckBoxVal(e,t){var n="",a=!0;return jQuery("#"+e+" tbody input[name="+t+"]:checked").each(function(){a?(n+=jQuery(this).val(),a=!1):n+=","+jQuery(this).val()}),n}function triggerInput(e){jQuery("#"+e).trigger("click")}function validate_link(e){var t=e.val(),n=e.parent(),a="";if(void 0===t||""==t)return!1;n.removeClass("has-warning has-success has-error"),n.find(".form-control-feedback").remove(),isUrlValid(t)?(n.addClass("has-success"),a='<div class="form-control-feedback right10"><i class="icon-checkmark-circle"></i></div>'):(show_notify("Lưu ý","warning","icon-warning2","Link của bạn chưa đúng định dạng"),n.addClass("has-warning "),a='<div class="form-control-feedback right10"><i class="icon-notification2"></i></div>'),e.after(a)}function validateInput(e,t){var n=jQuery("input[name="+e+"]");if(void 0===n)return!1;var a=n.parent();a.removeClass("has-warning has-success has-error").addClass("has-error"),a.find(".form-control-feedback").remove(),n.after('<div class="form-control-feedback right10"><i class="icon-cancel-circle2"></i></div>'),t&&n.focus()}function removeError(e){jQuery("#"+e+" input").change(function(){jQuery(this).parent().removeClass("has-warning has-success has-error").find(".form-control-feedback").remove()})}jQuery.fn.selectText=function(){var e=document,t=this[0];if(console.log(this,t),e.body.createTextRange)(n=document.body.createTextRange()).moveToElementText(t),n.select();else if(window.getSelection){var n,a=window.getSelection();(n=document.createRange()).selectNodeContents(t),a.removeAllRanges(),a.addRange(n)}};var MNG_CATE={URL_ACTION:ADMIN_PREFIX+"news/cate/",save:function(e,t){var n=jQuery(e).serializeArray();return _POST(this.URL_ACTION+"_save",n,function(e){1!=e.status?(alert(e.msg),null!=e.key&&jQuery(e.key).focus()):null!=e.data&&(null==t&&null!=e.data.link?window.location.href=e.data.link:(alert(e.msg),window.location.href=MNG_CATE.URL_ACTION+"input"))}),!1},updateStatus:function(e,t){if(!confirm("Danh mục này sẽ bị xóa, bạn có chắc chắn muốn thực hiện hành động này?"))return!1;var n=[{name:"cate",value:e}];n.push({name:"status",value:t});_POST(this.URL_ACTION+"_updateStatus",n,function(e){alert(e.msg),window.location.reload()})},getCateSelectOptionByObject:function(){var e=jQuery("#obj-object").val(),t=jQuery("#obj-parent");return _POST(this.URL_ACTION+"_getCateSelectOptionByObject?object="+e,[],function(e){null!=e.data.html&&t.html(e.data.html).select2(),t.attr("disabled",!1)}),!1},getCateCheckBoxByObject:function(e){void 0===e&&(e="#obj-type");var t=jQuery(e).val(),n=jQuery("#inputCateCheckBoxRegion");return _POST(this.URL_ACTION+"_getCateCheckBoxByObject?object="+t,[],function(e){null!=e.data.html&&(n.html(e.data.html),jQuery("input:checkbox, input:radio").uniform())}),!1}},MNG_MENU={URL_ACTION:ADMIN_PREFIX+"menu/",saveMenu:function(e){var t=jQuery(e).serializeArray();return _POST(this.URL_ACTION+"_save",t,function(e){alert(e.msg)}),!1}},MNG_MEDIA={URL_ACTION:ADMIN_PREFIX+"media/",BUTTON_ACTION_NAME:"",SELECTED:[],TARGET_OBJECT:!1,SELECTED_MULTI:!1,setting:{MULTI_SELECT:!1,BUTTON_ACTION:!1,CURENT_IMAGE:""},openUploadForm:function(e,t,n,a){return this.BUTTON_ACTION_NAME=e,this.SELECTED=[],this.TARGET_OBJECT=n,_SHOW_FORM_REMOTE(this.URL_ACTION+"_showFormUpload?action_name="+e+"&curent="+t)},openUploadFormWithConfig:function(e){return console.log(e),this.setting=e,this.SELECTED=[],_SHOW_FORM_REMOTE(this.URL_ACTION+"_showFormUpload?action_name="+this.setting.BUTTON_ACTION+"&curent="+this.setting.CURENT_IMAGE)},save:function(e,t){var n=jQuery(e).serializeArray();return _POST(this.URL_ACTION+"_save",n,function(e){1!=e.status?(alert(e.msg),null!=e.key&&jQuery(e.key).focus()):null!=e.data&&(null==addnew&&null!=e.data.link?window.location.href=e.data.link:(alert(e.msg),window.location.href=MNG_CATE.URL_ACTION+"input"))}),!1},uploadInit:function(e,t,n){var a=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"pickfiles",url:this.URL_ACTION+"_doUpload",filters:{max_file_size:"51mb",mime_types:[{title:"Chọn file bất kỳ",extensions:"*"}]},multipart_params:{},init:{PostInit:function(){},FilesAdded:function(e,t){var n=$("#uploadFileItemClone").clone();for(var i in t){var o=t[i];n.find(".js-document-container").attr("id",o.id),n.find(".js-document-loading").show(),$("#documentFileRegion").append(n.html())}a.start()},FileUploaded:function(e,t,i){a.removeFile(t);i=JSON.parse(i.response);var o=$("#"+t.id);console.table(t),o.find(".js-document-loading").hide(),o.find(".js-document-file").val(i.data.relative_link),o.find(".js-document-link").attr("href",i.data.full_size_link),o.find(".js-document-del").on("click",function(){bootbox.confirm("File của bạn sẽ bị xóa.<br/>Bạn có chắc chắn muốn thực hiện hành động này?",function(e){e&&$("#"+t.id).remove()})}),"function"==typeof n&&n(i,o)},UploadComplete:function(e,t){}}});a.init(),a.bind("FilesAdded",function(e,t){})},uploadAvatarInit:function(e,t,n){var a=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"upload-avatar",url:this.URL_ACTION+"_doUpload",filters:{max_file_size:"2mb",mime_types:[{title:"Chọn file ảnh",extensions:"*"}]},multipart_params:{},init:{PostInit:function(){},FilesAdded:function(e,t){if(t.length>1)return alert("Bạn chỉ được upload 1 file"),!1;a.start()},FileUploaded:function(e,t,n){a.removeFile(t);n=JSON.parse(n.response);console.table(t),$("#xem-lightbox").attr("href","/data/"+n.data.relative_link),$("#upload-avatar").attr("src","/data/"+n.data.relative_link),$("#avatar-container").css("background-image",`url('/data/${n.data.relative_link}')`),$("#input-avatar").val(n.data.relative_link)},UploadComplete:function(e,t){}}});a.init(),a.bind("FilesAdded",function(e,t){})}},MNG_POST={URL_ACTION:ADMIN_PREFIX+"post/",addTag:function(e,t){var n=jQuery(t),a=jQuery(e),i=a.val().trim();if(""==i)return!1;for(var o in i=i.split(";"))if(""!=i[o].trim()){var r="TAG-"+_convertToAlias(i[o].trim());if(0==jQuery("#"+r).length){var l='<li id="'+r+'"><input type="hidden" name="CATE[]" value="'+i[o].trim()+'"/>';l+="<i onclick=\"jQuery('#"+r+'\').remove();" class="icon-diff-removed"></i> '+i[o].trim()+"</li>",n.prepend(l)}}return a.val(""),!1},inputTagPress:function(e){if(13==e.which)return MNG_POST.addTag("#post-input-tag","#post-list-tag"),!1},save:function(e,t){var n=jQuery(e).serializeArray();return _POST(this.URL_ACTION+"_save",n,function(e){1!=e.status?(alert(e.msg),null!=e.key&&jQuery(e.key).focus()):null!=e.data&&(null==t&&null!=e.data.link_edit?window.location.href=e.data.link_edit:(alert(e.msg),window.location.href=MNG_POST.URL_ACTION+"input"))}),!1},update:function(e,t,n,a){var i=jQuery(t),o=i.serializeArray(),r=function(t){if(""!==t.msg&&alert(t.msg),void 0!==n)window.location.href=e;else try{void 0!==t.data.link&&(window.location.href=t.data.link)}catch(e){}try{void 0!==t.data.reset&&i[0].reset()}catch(e){}try{void 0!==t.data.reload&&window.location.reload()}catch(e){}};return"function"==typeof a&&(r=a),_POST(e,o,r),!1},deleteItem:function(e,t){if(!confirm("Đối tượng bị xóa sẽ không thể khôi phục lại được!\nBạn có chắc chắn muốn xóa đối tượng này?"))return!1;return _POST(e,[],function(e){alert(e.msg),1==e.status&&(jQuery("#itemRow_"+t).remove(),jQuery("#pos_"+t).remove(),jQuery(".pos_"+t).remove());try{void 0!==e.data.link&&(window.location.href=e.data.link)}catch(e){}try{void 0!==e.data.reload&&window.location.reload()}catch(e){}}),!1},sendNotification:function(e,t){var n=jQuery(t).serializeJSON();console.log(n);return _POST_JSON_BODY(e,n,function(e){alert(e.msg)}),!1}},MNG_MEMBER={URL_ACTION:ADMIN_PREFIX+"member/",save:function(e,t){var n=jQuery(e).serializeArray();return _POST(this.URL_ACTION+"_save",n,function(e){alert(e.msg),1!=e.status?null!=e.key&&jQuery(e.key).focus():null!=e.data&&(null==t&&null!=e.data.link_edit?window.location.href=e.data.link_edit:window.location.href=MNG_MEMBER.URL_ACTION+"input")}),!1},delete:function(e,t,n){if(!confirm('Bạn có chắc chắn muốn xóa thành viên: "'+e.account+'"'))return!1;var i=[];i.push({name:"obj",value:JSON.stringify(e)}),a,i.push({name:"token",value:t}),_POST(this.URL_ACTION+"_delete",i,function(t){alert(t.msg),1==t.status&&jQuery("#row_"+e.id).remove(),"edit"==n&&(window.location.href=ADMIN_PREFIX+"member/input")})}};function TOGGLE_POST_LIKE(e,t){$.get("/forum/toggle_like?post_id="+t,function(t){$(e).html(t.data.count)})}var HAVE_PUSH_SLINK=!1;function _SHOW_FORM_REMOTE_HAVE_LINK(e,t,n){_SHOW_FORM_REMOTE(e,t,n);let a=window.location.href,i=getUrlParameters(a,"slink");return console.log(a),i?a=replaceUrlParam(a,"slink",btoa(e)):-1===a.indexOf("?")?a+="?slink="+btoa(e):a+="&slink="+btoa(e),console.log(a),history.pushState(null,null,a),HAVE_PUSH_SLINK=e,!1}function _CLOSE_MODAL(){if($("#myModal").remove(),$("body").css({paddingRight:0}),$(".modal-backdrop").remove(),$(".modal-open").removeClass("modal-open"),!1!==HAVE_PUSH_SLINK)window.history.back();else if(getUrlParameters(window.location.href,"slink")){let e=removeURLParameter(window.location.href,"slink");window.location.href=e}}function INPUT_NUMBER(){$(".input-type-number").on("input",function(){event.target.value=event.target.value.replace(/\D/g,"")})}function INIT_TOUCHSPIN(){$(".touchspin-postfix").TouchSpin({min:0,max:200,step:.1,decimals:2,postfix:"%"})}function INPUT_NUMBER_FORMAT(){var e=$(".input-type-number-format");let t=e.length;for(let n=0;n<t;n++){let t=$(e[n]),a=t.val();t.val(number_format(a));let i=t.attr("name");t.next("input:hidden").length||t.parent().append('<input type="hidden" name="'+i+'" value="'+INPUT_NUMBER_FORMAT_REPLACE_DOT(a)+'">')}e.on("input",function(){event.target.value=number_format(event.target.value.replace(/\D/g,""));let e=$(this).val(),t=$(this).attr("name");$(this).next("input:hidden").length?$(this).next("input:hidden").val(INPUT_NUMBER_FORMAT_REPLACE_DOT(e)):$(this).parent().append('<input type="hidden" name="'+t+'" value="'+e+'">')})}function INPUT_NUMBER_FORMAT_REPLACE_DOT(e){return e.toString().replace(/\D/g,"")}function INPUT_NUMBER_WITH_COMMA(){$(".input-type-number-with-comma").on("input",function(){event.target.value=event.target.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")})}function DATE_PICKER_INIT(){$(".datepicker").datepicker({dateFormat:"dd/mm/yy"})}function SELECT2_CREATABLE(){$(".select2-createable").each(function(){let e={data:$(this).data("value")?$(this).data("value"):[],formatNoMatches:e=>"Nhập để thêm",createSearchChoice:e=>({id:e,text:e})};$(this).attr("multiple")&&(e.multiple=!0),$(this).attr("tags")&&(e.tags=!0);$(this).select2(e)})}const MNG_META_MEMBER={getTypeUrl:e=>`/staff/metadata?type=${e}`};function exportTableToExcel(e,t=""){var n,a=document.getElementById(e).outerHTML.replace(/ /g,"%20");if(t=t?t+".xls":"excel_data.xls",n=document.createElement("a"),document.body.appendChild(n),navigator.msSaveOrOpenBlob){var i=new Blob(["\ufeff",a],{type:"application/vnd.ms-excel"});navigator.msSaveOrOpenBlob(i,t)}else n.href="data:application/vnd.ms-excel, "+a,n.download=t,n.click()}function select_tinh_thanh_quan_huyen(e,t="/category/suggest"){let n=$(e).find("select.city"),a=$(e).find("select.district"),i=$(e).find("select.town"),o=({action:e,parentDom:n})=>({ajax:{url:t+e,data:function(e){let t=$(n).val();return{q:e.term,parent_key:t}},dataType:"json",processResults:function(e){return{results:Array.isArray(e.data)?e.data.map(e=>({id:e.code,text:e.name})):[]}}}});n.select2(o({action:"get_all_city"})),a.select2(o({action:"get_sub_location",parentDom:n})),i.select2(o({action:"get_sub_location",parentDom:a})),n.on("change",function(){a.val("").trigger("change"),i.val("").trigger("change")}),a.on("change",function(){i.val("").trigger("change")})}function _INIT_SWITCHERY_DELETE(){var e=swal.mixin({buttonsStyling:!1,confirmButtonClass:"btn btn-primary",cancelButtonClass:"btn btn-light"});$("#_accept_deleted").on("click",function(){var t=$(this);e.fire({title:"Cảnh báo hành động nguy hiểm",input:"checkbox",type:"error",inputValue:0,inputClass:"form-check-styled",inputPlaceholder:"Bạn có chắc chắn muốn xoá bản ghi này?",confirmButtonText:'Xác nhận <i class="icon-arrow-right14 ml-2></i>',inputValidator:function(e){return!e&&"Bạn cần xác nhận hành động của mình"},onOpen:function(){var e=document.querySelector(".swal2-checkbox.form-check-styled input[type=checkbox]");new Switchery(e)},preConfirm:function(){return fetch(t.data("link-trash")).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).catch(function(t){e.showValidationMessage("Có gì đó không ổn. Vui lòng liên hệ admin để xử lý vấn đề này."+t)})}}).then(function(t){t.value&&(0==t.value.status?e.fire({type:"error",text:t.value.msg}):(e.fire({type:"success",text:t.value.msg}),location.reload()))})}),$("#_accept_revert").on("click",function(){var t=$(this);e.fire({title:"Bản ghi này đã bị xoá",input:"checkbox",type:"error",inputValue:0,inputClass:"form-check-styled",inputPlaceholder:"Bạn có chắc chắn muốn khôi phục lại bản ghi này?",confirmButtonText:'Xác nhận <i class="icon-arrow-right14 ml-2></i>',inputValidator:function(e){return!e&&"Bạn cần xác nhận hành động của mình"},onOpen:function(){var e=document.querySelector(".swal2-checkbox.form-check-styled input[type=checkbox]");new Switchery(e)},preConfirm:function(){return fetch(t.data("link-revert")).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).catch(function(t){e.showValidationMessage("Có gì đó không ổn. Vui lòng liên hệ admin để xử lý vấn đề này."+t)})}}).then(function(t){t.value&&(0==t.value.status?e.fire({type:"error",text:t.value.msg}):(e.fire({type:"success",text:t.value.msg}),location.reload()))})})}